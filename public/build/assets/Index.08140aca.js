import{d as S,k as n,u as C,S as z,p as J,U as W,l as $,c as q,w as d,h as r,o as _,a as o,v as h,K as U,V as G,b as i,g as f,t as u,J as O,e as b,F as A,i as H,f as Q,z as V,W as y}from"./app.3fc7250d.js";import{A as R}from"./AdminLayout.a90147e8.js";import{_ as D}from"./Checkbox.f4fae9b3.js";import{_ as E}from"./InputLabel.a84602a0.js";import{_ as X}from"./InputError.7a3a3fa2.js";import{a as x}from"./DialogModal.77fe0a26.js";import Y from"./SurveyList.c6001fae.js";import{h as Z}from"./helpers.6ae94cef.js";import"./Pagination.f354069e.js";import"./moment.9709ab41.js";const ee={class:"container p-3 shadow-lg rounded-lg bg-white mt-10 mx-auto"},te={class:"flex justify-between p-2"},se={class:"flex justify-end","aria-label":"Page navigation example"},oe=o("label",{for:"default-search",class:"mb-2 text-sm font-medium text-gray-900 sr-only dark:text-gray-300"},"Search",-1),le={class:"relative"},re=o("div",{class:"flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none"},[o("svg",{"aria-hidden":"true",class:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1),ne={class:"grid grid-cols-8 gap-3"},ae={class:"col-span-3"},de=o("label",{class:"leading-7 text-sm text-gray-600"},"Survey Name",-1),ie=["disabled"],ue={class:"col-span-3"},ce=o("label",{for:"email",class:"leading-7 text-sm text-gray-600"},"Shown Only",-1),pe=o("option",{value:"all"},"All",-1),ge=o("option",{value:"college"},"College",-1),fe=o("option",{value:"course"},"Course",-1),ve=o("option",{value:"user"},"User",-1),_e=[pe,ge,fe,ve],he={class:"col-span-2"},ye=o("label",{for:"email",class:"leading-7 text-sm text-gray-600"},"Transparency to",-1),me=o("option",{value:"0"},"Private",-1),be=o("option",{value:"1"},"Public",-1),xe=[me,be],we={class:"col-span-6 flex"},ke=["disabled"],Ne={__name:"Index",setup(Se){const{alertOn:M,alertOnDelete:B,alertOnUpdate:N,alertOnMessage:c,onAlert:p}=Z(),v=S(n().props.value.search),s=C({name:"",setup:{shown_only:"all",select_all:!1,foreign_ids:[],is_private:1}}),w=C({id:0}),m=S([]),l=z({add_edit:{show:!1,details:{title:"Add Survey",id:0,method:"add",btn_submit:"Submit"}},delete:{show:!1,details:{title:"Delete Survey",id:0,content:""}},copy:{show:!1,details:{title:"Copy Survey",id:0,content:""}}});J(()=>{g(!1)});const F=()=>{l.add_edit.show=!0,l.add_edit.details.method="add",l.add_edit.details.title="Add Survey",s.name=""},P=()=>{l.add_edit.details.method=="add"?s.post(route("surveys.store"),{preserveScroll:!0,onSuccess:()=>{c.value="Survey Added",p("Success"),s.reset(),l.add_edit.show=!1},onError:a=>{}}):l.add_edit.details.method=="edit"?s.put(route("surveys.update",{id:l.add_edit.details.id}),{preserveScroll:!0,onSuccess:()=>{c.value="Survey Successfully updated",p("Update"),s.reset(),l.add_edit.show=!1},onError:a=>{}}):s.put(route("surveys.send_invitaion",{id:l.add_edit.details.id}),{preserveScroll:!0,onSuccess:()=>{c.value="Survey invitation successfully sent",p("Update"),s.reset(),l.add_edit.show=!1},onError:a=>{}})},T=()=>{w.id=l.copy.details.id,w.post(route("surveys.copy",{id:l.copy.details.id}),{preserveScroll:!0,onSuccess:()=>{c.value="Survey Copied",p("Success"),l.copy.show=!1},onError:a=>{}})},j=()=>{V.Inertia.delete(route("surveys.delete",{id:l.delete.details.id}),{preserveScroll:!0,onSuccess:()=>{c.value="Survey Deleted",p("Delete"),l.delete.show=!1},onError:a=>{}})},g=a=>{W();let t=[];switch(s.setup.shown_only){case"college":for(let e=0;e<n().props.value.colleges.length;e++)t.push({is_checked:a!=null?a:s.setup.foreign_ids.includes(n().props.value.colleges[e].id),name:n().props.value.colleges[e].name,id:n().props.value.colleges[e].id});break;case"course":for(let e=0;e<n().props.value.courses.length;e++)t.push({is_checked:a!=null?a:s.setup.foreign_ids.includes(n().props.value.courses[e].id),name:n().props.value.courses[e].name,id:n().props.value.courses[e].id});break;case"user":for(let e=0;e<n().props.value.users.length;e++)t.push({is_checked:a!=null?a:s.setup.foreign_ids.includes(n().props.value.users[e].id),name:n().props.value.users[e].name,id:n().props.value.users[e].id});break}m.value=t},I=()=>{switch(s.setup.shown_only){case"college":s.setup.foreign_ids.length==n().props.value.colleges.length?s.setup.select_all=!0:s.setup.select_all=!1;break;case"course":s.setup.foreign_ids.length==n().props.value.courses.length?s.setup.select_all=!0:s.setup.select_all=!1;break;case"user":s.setup.foreign_ids.length==n().props.value.users.length?s.setup.select_all=!0:s.setup.select_all=!1;break}},k=()=>{V.Inertia.get(route("administrator.survey",{search:v.value}))};return $(()=>m.value,(a,t)=>{s.setup.foreign_ids=[],a.forEach(e=>{e.is_checked&&s.setup.foreign_ids.push(e.id)}),I()},{deep:!0}),$(()=>l.add_edit.show,(a,t)=>{(l.add_edit.details.method=="edit"||l.add_edit.details.method=="invite")&&g(null)},{deep:!0}),y("modals",l),y("search",v),y("form_add_edit",s),y("form_add_edit",s),(a,t)=>(_(),q(R,{alertOn:r(M),alertOnDelete:r(B),alertOnUpdate:r(N),alertOnMessage:r(c)},{default:d(()=>[o("div",ee,[o("div",te,[o("button",{onClick:t[0]||(t[0]=e=>F()),class:"flex text-white bg-green-500 border-0 py-2 px-8 focus:outline-none hover:bg-green-600 rounded text-lg"}," Add Survey "),o("nav",se,[oe,o("div",le,[re,h(o("input",{onKeydown:t[1]||(t[1]=G(e=>k(),["enter"])),type:"search","onUpdate:modelValue":t[2]||(t[2]=e=>v.value=e),id:"default-search",class:"block pr-4 pl-10 py-3 w-[300px] text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-green-500 focus:border-green-500",placeholder:"Search Survey"},null,544),[[U,v.value]]),o("button",{onClick:t[3]||(t[3]=e=>k()),type:"button",class:"text-white absolute right-2 bottom-1 bg-green-700 hover:bg-green-800 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-4 py-2"}," Search ")])])]),i(Y)]),i(x,{show:l.add_edit.show},{title:d(()=>[f(u(l.add_edit.details.title),1)]),content:d(()=>[o("div",ne,[o("div",ae,[de,h(o("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>r(s).name=e),disabled:l.add_edit.details.method=="invite",type:"text",class:"w-full bg-gray-100 bg-opacity-50 rounded border border-gray-300 focus:border-green-500 focus:bg-white focus:ring-2 focus:ring-green-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"},null,8,ie),[[U,r(s).name]]),i(X,{message:r(s).errors.name},null,8,["message"])]),o("div",ue,[ce,h(o("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>r(s).setup.shown_only=e),onChange:t[6]||(t[6]=e=>g(!1)),class:"block py-2.5 px-0 w-full text-sm text-gray-500 bg-transparent border-0 border-b-2 border-gray-200 appearance-nonefocus:outline-none focus:ring-0 focus:border-gray-200 peer"},_e,544),[[O,r(s).setup.shown_only]])]),o("div",he,[ye,h(o("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>r(s).setup.is_private=e),onChange:t[8]||(t[8]=e=>g(!1)),class:"block py-2.5 px-0 w-full text-sm text-gray-500 bg-transparent border-0 border-b-2 border-gray-200 appearance-nonefocus:outline-none focus:ring-0 focus:border-gray-200 peer"},xe,544),[[O,r(s).setup.is_private]])]),r(s).setup.shown_only!="all"?(_(),b(A,{key:0},[o("div",we,[i(E,null,{default:d(()=>[i(D,{checked:r(s).setup.select_all,"onUpdate:checked":t[9]||(t[9]=e=>r(s).setup.select_all=e),onChange:t[10]||(t[10]=e=>g(r(s).setup.select_all))},null,8,["checked"]),o("span",null,u(r(s).setup.select_all==!0?"Unselect All":"Select All"),1)]),_:1})]),(_(!0),b(A,null,H(m.value,(e,K)=>(_(),b("div",{key:K,class:"col-span-3"},[i(E,null,{default:d(()=>[i(D,{checked:e.is_checked,"onUpdate:checked":L=>e.is_checked=L},null,8,["checked","onUpdate:checked"]),o("span",null,u(e.name),1)]),_:2},1024)]))),128))],64)):Q("",!0)])]),footer:d(()=>[o("button",{onClick:t[11]||(t[11]=e=>l.add_edit.show=!1),class:"flex mr-2 text-white bg-gray-500 border-0 py-2 px-8 focus:outline-none hover:bg-gray-600 rounded text-lg"}," Cancel "),o("button",{onClick:t[12]||(t[12]=e=>P()),disabled:r(s).processing,class:"flex text-white bg-green-500 border-0 py-2 px-8 focus:outline-none hover:bg-green-600 rounded text-lg"},u(l.add_edit.details.btn_submit),9,ke)]),_:1},8,["show"]),i(x,{show:l.delete.show},{title:d(()=>[f(u(l.delete.details.title),1)]),content:d(()=>[f(u(l.delete.details.content),1)]),footer:d(()=>[o("button",{onClick:t[13]||(t[13]=e=>l.delete.show=!1),class:"flex mr-2 text-white bg-gray-500 border-0 py-2 px-8 focus:outline-none hover:bg-gray-600 rounded text-lg"}," Cancel "),o("button",{onClick:t[14]||(t[14]=e=>j()),class:"flex text-white bg-red-500 border-0 py-2 px-8 focus:outline-none hover:bg-red-600 rounded text-lg"}," Delete ")]),_:1},8,["show"]),i(x,{show:l.copy.show},{title:d(()=>[f(u(l.copy.details.title),1)]),content:d(()=>[f(u(l.copy.details.content),1)]),footer:d(()=>[o("button",{onClick:t[15]||(t[15]=e=>l.copy.show=!1),class:"flex mr-2 text-white bg-gray-500 border-0 py-2 px-8 focus:outline-none hover:bg-gray-600 rounded text-lg"}," Cancel "),o("button",{onClick:t[16]||(t[16]=e=>T()),class:"flex text-white bg-green-500 border-0 py-2 px-8 focus:outline-none hover:bg-green-600 rounded text-lg"}," Copy ")]),_:1},8,["show"])]),_:1},8,["alertOn","alertOnDelete","alertOnUpdate","alertOnMessage"]))}};export{Ne as default};
