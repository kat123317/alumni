import{a as Q}from"./DialogModal.77fe0a26.js";import{A as E}from"./AdminLayout.a90147e8.js";import V from"./ModalAddEditQuestion.31382b5c.js";import j from"./QList.2e0eff26.js";import{u as y,S as z,d as k,X as L,k as C,c as U,w as u,h as c,o as w,a as e,t as g,b as p,L as S,e as O,i as q,F,g as M,z as N,W as r}from"./app.3fc7250d.js";import{h as I}from"./helpers.6ae94cef.js";import"./InputLabel.a84602a0.js";import"./InputError.7a3a3fa2.js";import"./Checkbox.f4fae9b3.js";import"./Dropdown.392d814a.js";import"./SingleSelect.bc2b7fb9.js";import"./InputText.47d45497.js";import"./MultipleSelect.3f530fdd.js";const P={class:"container p-3 shadow-lg rounded-lg bg-white mt-10 mx-auto"},H={class:"font-sans flex flex-col text-center bg-whte sm:flex-row sm:text-left sm:justify-between py-4 px-6 bg-white shadow sm:items-baseline w-full"},T={class:"mb-2 sm:mb-0"},W={class:"text-2xl no-underline text-grey-darkest text-gray-700 font-bold"},X={class:"flex justify-center gap-1"},G={class:"flex text-white bg-gray-500 border-0 py-2 px-8 focus:outline-none hover:bg-green-600 rounded text-lg"},J=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"})],-1),K=["href"],R=e("button",{class:"flex text-white bg-blue-500 border-0 py-2 px-8 focus:outline-none hover:bg-blue-600 rounded text-lg"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-7 h-7"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]),e("span",{class:"ml-1"},"Preview")],-1),Y=[R],Z=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-7 h-7"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),ee=e("span",{class:"ml-1"},"Add",-1),te=[Z,ee],se={class:"w-full px-2 mt-2"},oe={class:"w-full"},le={class:"flex float-right gap-1"},ie=["onClick"],re=["onClick"],be={__name:"Index",setup(ne){const{alertOn:v,alertOnDelete:D,alertOnUpdate:A,alertOnMessage:_,onAlert:x}=I(),i=y({instruction:"",setup:{input:!1,input_label:"",dropdown:!1,multiple_select:!1,image:!1,required:!0,choices:[]}}),o=z({add_edit:{show:!1,details:{id:0,title:"Add Quesetion",method:"add"}},delete:{show:!1,details:{title:"Delete Question",id:0,content:""}}}),n=k([]),a=k({}),h=y({answers:{},status:"ongoing"});L(()=>{n.value=C().props.value.survey.questions,f()});const f=()=>{n.value.forEach(t=>{if(t.setup.input==!0)a.value["question_"+t.id]="";else if(t.setup.dropdown==!0||t.setup.multiple_select==!1){if(a.value["question_"+t.id]=0,t.setup.dropdown==!1){let l={};t.setup.choices.forEach(s=>{s.write_in&&(l["write_"+s.value]="")}),h.answers["write_in_"+t.id]=l}}else{let l={},s={};t.setup.choices.forEach(d=>{l["choice_"+d.value]=0,d.write_in&&(s["write_"+d.value]="")}),a.value["question_"+t.id]=l,h.answers["write_in_"+t.id]=s}})},b=(t="add",l=-1)=>{if(t=="add")i.reset(),o.add_edit.show=!0,o.add_edit.details.method=t,o.add_edit.details.title="Add Question";else{let s=n.value[l];i.instruction=s.instruction,i.setup.input=s.setup.input,i.setup.dropdown=s.setup.dropdown,i.setup.multiple_select=s.setup.multiple_select,i.setup.choices=s.setup.choices,i.setup.image=s.setup.image,i.setup.required=s.setup.required,o.add_edit.details.method="edit",o.add_edit.details.id=s.id,o.add_edit.details.title="Update Question "+s.order,o.add_edit.show=!0}},$=t=>{o.delete.details.id=n.value[t].id,o.delete.details.content="Are you sure you want to delete Question "+n.value[t].order+"?",o.delete.show=!0},B=()=>{N.Inertia.delete(route("surveys.questions.delete",{survey_id:C().props.value.survey.id,id:o.delete.details.id}),{preserveScroll:!0,onSuccess:()=>{f(),_.value="Question Deleted",x("Delete"),o.delete.show=!1,location.reload()},onError:t=>{}})};return r("form_add_edit",i),r("modals",o),r("onAlert",x),r("alertOn",v),r("alertOnMessage",_),r("initialize",f),r("questions",n),r("my_choices",h),(t,l)=>(w(),U(E,{alertOn:c(v),alertOnDelete:c(D),alertOnUpdate:c(A),alertOnMessage:c(_)},{default:u(()=>[e("div",P,[e("nav",H,[e("div",T,[e("a",W,g(t.$page.props.survey.name),1)]),e("div",null,[e("div",X,[e("button",G,[p(c(S),{class:"flex",href:t.route("administrator.survey")},{default:u(()=>[J]),_:1},8,["href"])]),e("a",{href:t.route("surveys.engine.review",{survey_id:t.$page.props.survey.id}),target:"_blank"},Y,8,K),e("button",{onClick:l[0]||(l[0]=s=>b("add")),class:"flex text-white bg-green-500 border-0 py-2 px-8 focus:outline-none hover:bg-green-600 rounded text-lg"},te)])])]),e("div",se,[(w(!0),O(F,null,q(n.value,(s,d)=>(w(),O("div",oe,[e("div",le,[e("button",{onClick:m=>b("edit",d),class:"flex text-white bg-blue-500 border-0 py-1 px-2 focus:outline-none hover:bg-blue-600 rounded text-sm"}," Edit ",8,ie),e("button",{onClick:m=>$(d),class:"flex text-white bg-red-500 border-0 py-1 px-2 focus:outline-none hover:bg-red-600 rounded text-sm"}," Delete ",8,re)]),p(j,{question:s,disabled:!1,modelValue:a.value["question_"+s.id],"onUpdate:modelValue":m=>a.value["question_"+s.id]=m},null,8,["question","modelValue","onUpdate:modelValue"])]))),256))])]),p(V),p(Q,{show:o.delete.show},{title:u(()=>[M(g(o.delete.details.title),1)]),content:u(()=>[M(g(o.delete.details.content),1)]),footer:u(()=>[e("button",{onClick:l[1]||(l[1]=s=>o.delete.show=!1),class:"flex mr-2 text-white bg-gray-500 border-0 py-2 px-8 focus:outline-none hover:bg-gray-600 rounded text-lg"}," Cancel "),e("button",{onClick:l[2]||(l[2]=s=>B()),class:"flex text-white bg-red-500 border-0 py-2 px-8 focus:outline-none hover:bg-red-600 rounded text-lg"}," Delete ")]),_:1},8,["show"])]),_:1},8,["alertOn","alertOnDelete","alertOnUpdate","alertOnMessage"]))}};export{be as default};
