import{_ as O,j as L,o as r,e as h,a as l,v as b,A as T,h as o,s as P,r as R,M as W,O as K,d as M,c as A,w as a,g as u,t as G,b as d,K as C,F as x,i as H,f as Q,n as B,Q as _,k as q,z as J,P as X}from"./app.3fc7250d.js";import{a as Y}from"./DialogModal.77fe0a26.js";import{_ as $}from"./InputLabel.a84602a0.js";import{_ as Z}from"./InputError.7a3a3fa2.js";import{_ as ee}from"./Checkbox.f4fae9b3.js";import{h as te}from"./helpers.6ae94cef.js";const D=c=>(W("data-v-aeedc0e9"),c=c(),K(),c),se={class:"flex items-center cursor-pointer"},oe={class:"relative"},ne=["value"],le=D(()=>l("div",{class:"w-12 h-7 bg-gray-200 rounded-full shadow-inner"},null,-1)),ae=D(()=>l("div",{class:"dot absolute w-6 h-6 bg-white rounded-full shadow left-0.5 top-0.5 transition"},null,-1)),ie={class:"ml-1 text-gray-600"},de={__name:"InputToggle",props:{checked:{type:[Array,Boolean],default:!1},value:{type:String,default:null}},emits:["update:checked"],setup(c,{emit:V}){const i=c,f=L({get(){return i.checked},set(m){V("update:checked",m)}});return(m,e)=>(r(),h("label",se,[l("div",oe,[b(l("input",{"onUpdate:modelValue":e[0]||(e[0]=v=>P(f)?f.value=v:null),value:c.value,class:"btn-toggle",type:"checkbox"},null,8,ne),[[T,o(f)]]),le,ae]),l("div",ie,[R(m.$slots,"default",{},void 0,!0)])]))}},I=O(de,[["__scopeId","data-v-aeedc0e9"]]),ue={class:"flex justify-between"},re={class:"flex items-center mb-4"},ce=["checked"],pe=l("label",{for:"default-checkbox",class:"ml-2 text-sm font-medium text-gray-900"},"Required",-1),ge={class:"grid grid-cols-6 gap-1"},fe={class:"col-span-6"},me={class:"col-span-5"},_e={class:"flex gap-1 mb-1"},he=["onUpdate:modelValue"],be=["onUpdate:modelValue"],ve=["onClick"],ye=["id"],xe=["onClick"],we=l("span",{class:"pl-1 mb-3"},"Write In Choice",-1),ke={class:"flex gap-1"},Ce={class:"col-span-1"},$e={class:"mt-7 mb-2"},Me={__name:"ModalAddEditQuestion",setup(c){const{random_str:V}=te(),i=_("modals"),f=_("alertOnMessage"),m=_("onAlert"),e=_("form_add_edit"),v=_("initialize"),U=_("questions"),w=M(""),y=M([]),N=()=>{let n=1,t=Math.max.apply(null,e.setup.choices.map(function(p){return p.value}));t>0&&(n=t+1),e.setup.choices.push({label:w.value,value:n,write_in:!1,img_src:""}),w.value=""},j=n=>{e.setup.choices.splice(n,1)},z=()=>{i.add_edit.details.method=="add"?axios.post(route("surveys.questions.store",{survey_id:q().props.value.survey.id}),e).then(function(n){y.value.length>0?E(n):(e.reset(),U.value.push(n.data.question),v()),i.add_edit.show=!1,f.value="Question Added",m("Success")}).catch(function(n){console.log(n)}):axios.put(route("surveys.questions.update",{survey_id:q().props.value.survey.id,id:i.add_edit.details.id}),e).then(function(n){if(y.value.length>0)E(n);else{e.reset();let t=U.value.findIndex(p=>p.id==i.add_edit.details.id);U.value[t]=n.data.question,v()}f.value="Question Successfully updated",m("Update"),i.add_edit.show=!1}).catch(function(n){console.log(n)})},k=(n="dropdown")=>{n=="dropdown"?e.setup.dropdown?(e.setup.multiple_select=!1,e.setup.image=!1,e.setup.input=!1):e.setup.input&&(e.setup.multiple_select=!1,e.setup.image=!1):e.setup.input&&(e.setup.multiple_select=!1,e.setup.image=!1,e.setup.dropdown=!1)},F=n=>{let t=document.getElementById("hidden-input-"+n);t.click(),t.onchange=p=>{let s=p.target.files[0];e.setup.choices[n].img_src==""||e.setup.choices[n].img_src==null?e.setup.choices[n].img_src=V(5)+"."+s.name.split(".").pop():e.setup.choices[n].img_src=e.setup.choices[n].img_src.split(".").shift()+"."+s.name.split(".").pop(),y.value[n]=s}},E=n=>{J.Inertia.post(route("surveys.questions.upload_images",{survey_id:q().props.value.survey.id,id:n.data.q_id}),{images:y.value,setup:e.setup},{preserveScroll:!0,onSuccess:()=>{y.value=[],e.reset(),v()},onFinish:()=>{},onError:t=>{}})};return(n,t)=>{const p=X("QuillEditor");return r(),A(Y,{show:o(i).add_edit.show,maxWidth:"6xl",closeable:!1},{title:a(()=>[l("div",ue,[u(G(o(i).add_edit.details.title)+" ",1),l("div",re,[b(l("input",{id:"default-checkbox",type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=s=>o(e).setup.required=s),checked:o(e).setup.choices.length==0?!1:o(e).setup.required,class:"ml-2 mt-2 w-6 h-6 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"},null,8,ce),[[T,o(e).setup.required]]),pe])])]),content:a(()=>[d($,null,{default:a(()=>[u("Instruction")]),_:1}),d(p,{content:o(e).instruction,"onUpdate:content":t[1]||(t[1]=s=>o(e).instruction=s),class:"relative w-full bg-gray-100 bg-opacity-50 rounded border border-gray-300 focus:border-green-500 focus:bg-white focus:ring-2 focus:ring-green-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out",theme:"snow",toolbar:"minimal",id:"postEditor",contentType:"html"},null,8,["content"]),l("div",ge,[l("div",fe,[d(Z,{message:o(e).errors.instruction},null,8,["message"])]),l("div",me,[o(e).setup.input?(r(),h(x,{key:0},[d($,null,{default:a(()=>[u("Input Label")]),_:1}),b(l("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>o(e).setup.input_label=s),type:"text",class:"w-full bg-gray-100 bg-opacity-50 rounded border border-gray-300 focus:border-green-500 focus:bg-white focus:ring-2 focus:ring-green-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"},null,512),[[C,o(e).setup.input_label]])],64)):(r(),h(x,{key:1},[d($,null,{default:a(()=>[u("Choices")]),_:1}),(r(!0),h(x,null,H(o(e).setup.choices,(s,S)=>(r(),h(x,null,[l("div",_e,[b(l("input",{"onUpdate:modelValue":g=>s.label=g,type:"text",placeholder:"choice label",class:"w-full bg-gray-100 bg-opacity-50 rounded border border-gray-300 focus:border-green-500 focus:bg-white focus:ring-2 focus:ring-green-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"},null,8,he),[[C,s.label]]),o(e).setup.image?(r(),h(x,{key:0},[b(l("input",{"onUpdate:modelValue":g=>s.img_src=g,readonly:"",placeholder:"image name",type:"text",class:"w-full bg-gray-100 bg-opacity-50 rounded border border-gray-300 focus:border-green-500 focus:bg-white focus:ring-2 focus:ring-green-200 text-base placeholder-gray-300 outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"},null,8,be),[[C,s.img_src]]),l("button",{onClick:g=>F(S),class:"flex text-white bg-blue-500 border-0 py-2 px-4 focus:outline-none hover:bg-blue-600 rounded text-lg"}," Image ",8,ve),l("input",{id:"hidden-input-"+S,type:"file",class:"hidden",accept:"image/png, image/gif, image/jpeg"},null,8,ye)],64)):Q("",!0),l("button",{onClick:g=>j(S),class:"flex text-white bg-red-500 border-0 py-2 px-4 focus:outline-none hover:bg-red-600 rounded text-lg"}," Delete ",8,xe)]),o(e).setup.dropdown==!1?(r(),A($,{key:0,class:"inline-block"},{default:a(()=>[d(ee,{modelValue:s.write_in,"onUpdate:modelValue":g=>s.write_in=g,class:"-mt-1"},null,8,["modelValue","onUpdate:modelValue"]),we]),_:2},1024)):Q("",!0)],64))),256)),l("div",ke,[b(l("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>w.value=s),type:"text",placeholder:"New Choice",class:"w-full bg-gray-100 bg-opacity-50 rounded border border-gray-300 focus:border-green-500 focus:bg-white focus:ring-2 focus:ring-green-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"},null,512),[[C,w.value]]),l("button",{onClick:t[4]||(t[4]=s=>N()),class:"flex text-white bg-green-500 border-0 py-2 px-[1.6rem] focus:outline-none hover:bg-green-600 rounded text-lg"}," Add ")])],64))]),l("div",Ce,[l("div",$e,[d(I,{onChange:t[5]||(t[5]=s=>k("input")),checked:o(e).setup.input,"onUpdate:checked":t[6]||(t[6]=s=>o(e).setup.input=s)},{default:a(()=>[u("Input ")]),_:1},8,["checked"]),d(I,{class:"pt-1",onChange:t[7]||(t[7]=s=>k("dropdown")),checked:o(e).setup.dropdown,"onUpdate:checked":t[8]||(t[8]=s=>o(e).setup.dropdown=s)},{default:a(()=>[u("Dropdown")]),_:1},8,["checked"]),d(I,{class:B(["py-1",{"cursor-not-allowed":o(e).setup.dropdown||o(e).setup.input}]),onChange:t[9]||(t[9]=s=>k()),checked:o(e).setup.multiple_select,"onUpdate:checked":t[10]||(t[10]=s=>o(e).setup.multiple_select=s)},{default:a(()=>[u("Multiple Select")]),_:1},8,["class","checked"]),d(I,{class:B(["pb-1",{"cursor-not-allowed":o(e).setup.dropdown||o(e).setup.input}]),onChange:t[11]||(t[11]=s=>k()),checked:o(e).setup.image,"onUpdate:checked":t[12]||(t[12]=s=>o(e).setup.image=s)},{default:a(()=>[u("Image Select ")]),_:1},8,["class","checked"])])])])]),footer:a(()=>[l("button",{onClick:t[13]||(t[13]=s=>o(i).add_edit.show=!1),class:"flex mr-2 text-white bg-gray-500 border-0 py-2 px-8 focus:outline-none hover:bg-gray-600 rounded text-lg"}," Cancel "),l("button",{onClick:t[14]||(t[14]=s=>z()),class:"flex text-white bg-green-500 border-0 py-2 px-8 focus:outline-none hover:bg-green-600 rounded text-lg"}," Submit ")]),_:1},8,["show"])}}};export{Me as default};
