import{u as y,j as v,p as w,e as l,a as e,v as k,K as $,h as i,F as p,i as _,o as a,t as c,n as h,Q as C,k as f}from"./app.3fc7250d.js";import{h as j}from"./moment.9709ab41.js";const S={class:"w-1/3 border flex flex-col"},B={class:"py-2 px-3 bg-grey-lighter flex flex-row justify-between items-center"},F=["src"],L={class:"flex gap-1 py-2 px-2 bg-grey-lightest"},D=["onClick"],I=["src"],M={class:"ml-4 flex-1 border-b border-grey-lighter py-4"},N={class:"flex items-bottom justify-between"},V={class:"text-grey-darkest"},z=e("p",{class:"text-grey-dark mt-1 text-sm"},"I'll be back",-1),E=["onClick"],K=["src"],O={class:"ml-4 flex-1 border-b border-grey-lighter py-4"},P={class:"flex items-bottom justify-between"},Q={class:"text-xs text-grey-darkest"},T=e("p",{class:"text-grey-dark mt-1 text-sm"},"I'll be back",-1),G={__name:"ConversationList",setup(U){const n=C("open_convo_data"),r=y({search_text:"",searching:!1}),u=v(()=>r.searching==!1?f().props.value.conversations:f().props.value.users.filter(t=>t.name.toLowerCase().indexOf(r.search_text)>-1));w(()=>{});const m=t=>{if(t)return j(t).fromNow()},x=()=>{r.search_text==""?r.searching=!1:r.searching=!0},g=(t,o)=>{n.conversation_id=t,n.selected_user_id=o,n.get(route("socialmedia.messaging"),{preserveScroll:!0,onSuccess:()=>{r.searching=!1,n.reset()}})};return(t,o)=>(a(),l("div",S,[e("div",B,[e("div",null,[e("img",{class:"w-10 h-10 rounded-full",src:t.$page.props.user.profile_photo_url},null,8,F)])]),e("div",L,[k(e("input",{"onUpdate:modelValue":o[0]||(o[0]=s=>i(r).search_text=s),type:"text",class:"w-full border-gray-300 focus:border-green-500 focus:bg-white focus:ring-1 focus:ring-green-700 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out",placeholder:"Search or start new chat"},null,512),[[$,i(r).search_text]]),e("button",{onClick:o[1]||(o[1]=s=>x()),type:"submit",class:"text-white right-2.5 bottom-2.5 bg-green-700 hover:bg-green-800 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-4 py-2 mt-1 float-right"}," Search ")]),i(r).searching==!0?(a(!0),l(p,{key:0},_(i(u),(s,d)=>(a(),l("div",{class:"bg-grey-200 w-full flex-1 overflow-auto",key:d},[e("div",{onClick:b=>g(null,s.id),class:"bg-white px-3 flex items-center hover:bg-grey-lighter cursor-pointer"},[e("div",null,[e("img",{class:"h-12 w-12 rounded-full",src:s.profile_photo_url},null,8,I)]),e("div",M,[e("div",N,[e("p",V,c(s.name),1)]),z])],8,D)]))),128)):(a(!0),l(p,{key:1},_(i(u),(s,d)=>(a(),l("div",{class:"bg-grey-lighter lg:flex-1 overflow-auto",key:d},[e("div",{onClick:b=>g(s.id,s.user1.id==t.$page.props.user.id?s.user2.id:s.user1.id),class:h(["bg-white px-3 flex items-center hover:bg-grey-lighter cursor-pointer",s.id==t.$page.props.conversation_id?"bg-green-300":""])},[e("div",null,[e("img",{class:"h-12 w-12 rounded-full",src:s.user1.id==t.$page.props.user.id?s.user2.profile_photo_url:s.user1.profile_photo_url},null,8,K)]),e("div",O,[e("div",P,[e("p",{class:h(["text-grey-darkest",{"font-bold":s.read.includes(t.$page.props.user.id)==!1}])},c(s.user1.id==t.$page.props.user.id?s.user2.name:s.user1.name),3),e("p",Q,c(m(s.created_at)),1)]),T])],10,E)]))),128))]))}};export{G as default};
